<!DOCTYPE html>
<html>
<head>
	<title>Hello React</title>
	<script src="https://fb.me/react-15.2.1.js"></script>
	<script src="https://fb.me/react-dom-15.2.1.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
  <script type="text/javascript" src="processRefNoMask.js"></script>
</head>
<body>
	<div id="inputMask"></div>

	<script type="text/babel">
'use strict';
let t1 = [{"name":"Bombardier", "abbr":"BO"},
  {"name":"Pratt Whitney", "abbr":"PW"},
  {"name":"CAE", "abbr":"CAE"},
  {"name":"Merk", "abbr":"MK"},
  {"name":"Phisor", "abbr":"PH"}];

let t2 = [
  {"name": "marketing", "abbr":"mk"},
  {"name": "finance", "abbr":"fi"},
  {"name": "sales", "abbr":"sa"},
  {"name": "it", "abbr":"it"},
  {"name": "engineering", "abbr":"eng"}
];

let t3 = [
  {"name":"assembly1", "abbr":"assy1"},
  {"name":"assembly 2", "abbr":"assy2"},
  {"name":"assembly 3", "abbr":"assy3"},
  {"name":"assembly 4", "abbr":"assy4"}
];

let team = {"name": "QA", "abbr":"QA"};

let tags = [t1,t2,t3];
	// create a react component
	// can only return 1 top-most element.  Can't return <div></div><h1></h1>


	var InputMask = React.createClass({
    getInitialState: function(){
      return {
        inputMaskValue: '',
        processedInputMaskValue: '',
        errorMessage: ''
      };
    },
    processMask: function(e){
      var inputMask = this.refs.mask.value.trim();

      this.setState({inputMaskValue: inputMask});
      var errorMessage ='';

      let result = JITBASE.processRefNoMask(inputMask, tags, team);

      this.setState({errorMessage: result.error});
      this.setState({processedInputMaskValue: result.result});
      e.preventDefault();
    },
    inputMaskValue: function(){
      return processedInputMaskValue;
    },
		render: function(){
			return( <div>

        <h3>Input:  {this.state.inputMaskValue}</h3>
        <h2>Output:  {this.state.processedInputMaskValue}</h2>
      <form onSubmit={this.processMask}>
        <input type="text" placeholder="enter mask" ref="mask" onChange={this.processMask} style={{width:500}} />
        <input type="submit" value="Submit" />
        </form>
        <div className="error">{this.state.errorMessage}</div>
			</div>
      )
		}
	});

		ReactDOM.render(
			<InputMask thisIsAProp="this is a prop value">This is a prop children</InputMask>,
			document.getElementById('inputMask')
		);

		// example of rending HTML
		// remember you need to use className instead of class and htmlFor instead of for
		/*
		ReactDOM.render(
			<h1>Hello World</h1>,
			document.getElementById('greeting')
		);
		*/
	</script>
</body>
</html>